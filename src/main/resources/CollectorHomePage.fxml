<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import org.kordamp.ikonli.javafx.FontIcon?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="view.collectorhomepage.FXCollectorHPView"
            prefHeight="800.0" prefWidth="1400.0"
            style="-fx-font-family: 'Arial', sans-serif; -fx-background-color: #252F3D;">

    <!-- Top Navigation Bar -->
    <top>
        <HBox alignment="CENTER_LEFT" spacing="15"
              style="-fx-background-color: #1F2933; -fx-padding: 15;">

            <!-- Left Navigation Icons -->
            <Button style="-fx-background-color: transparent; -fx-cursor: hand;">
                <graphic>
                    <FontIcon iconLiteral="fas-home" iconSize="18" iconColor="white"/>
                </graphic>
            </Button>
            <Button style="-fx-background-color: transparent; -fx-cursor: hand;">
                <graphic>
                    <FontIcon iconLiteral="fas-chart-bar" iconSize="18" iconColor="white"/>
                </graphic>
            </Button>
            <Button style="-fx-background-color: transparent; -fx-cursor: hand;">
                <graphic>
                    <FontIcon iconLiteral="fas-folder" iconSize="18" iconColor="white"/>
                </graphic>
            </Button>
            <Button fx:id="logoutButton" onAction="#onLogoutClicked"
                    style="-fx-background-color: transparent; -fx-cursor: hand;">
                <graphic>
                    <FontIcon iconLiteral="fas-sign-out-alt" iconSize="18" iconColor="white"/>
                </graphic>
            </Button>

            <!-- Search Bar -->
            <TextField fx:id="searchField" promptText="Search for user, collection, cards..."
                       prefWidth="350"
                       style="-fx-background-color: #3E4C59; -fx-text-fill: white; -fx-prompt-text-fill: lightgray; -fx-background-radius: 5; -fx-padding: 10; -fx-font-size: 14px;"/>

            <!-- Search Button -->
            <Button text="Search" onAction="#onSearchClicked"
                    style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-size: 14px; -fx-background-radius: 5; -fx-cursor: hand; -fx-padding: 10 20 10 20;">
                <graphic>
                    <FontIcon iconLiteral="fas-search" iconSize="14" iconColor="white"/>
                </graphic>
            </Button>

            <!-- Filters MenuButton -->
            <MenuButton text="Filters" prefHeight="40"
                        style="-fx-background-color: #3E4C59; -fx-text-fill: white; -fx-font-size: 14px; -fx-background-radius: 5; -fx-cursor: hand; -fx-padding: 10 20 10 20;">
                <graphic>
                    <FontIcon iconLiteral="fas-filter" iconSize="14" iconColor="white"/>
                </graphic>
                <items>
                    <CustomMenuItem hideOnClick="false">
                        <content>
                            <VBox spacing="10" style="-fx-padding: 10; -fx-background-color: white;">
                                <!-- Game Filter -->
                                <VBox spacing="5">
                                    <Label text="Game" style="-fx-text-fill: #1F2933; -fx-font-size: 14px; -fx-font-weight: bold;"/>
                                    <ComboBox fx:id="gameComboBox" prefWidth="200" promptText="Select Game"
                                              style="-fx-background-color: white;"/>
                                </VBox>

                                <!-- Expansion Filter -->
                                <VBox spacing="5">
                                    <Label text="Expansion" style="-fx-text-fill: #1F2933; -fx-font-size: 14px; -fx-font-weight: bold;"/>
                                    <ComboBox fx:id="expansionComboBox" prefWidth="200" promptText="Select Expansion"
                                              style="-fx-background-color: white;"/>
                                </VBox>

                                <!-- Condition Filter -->
                                <VBox spacing="5">
                                    <Label text="Condition" style="-fx-text-fill: #1F2933; -fx-font-size: 14px; -fx-font-weight: bold;"/>
                                    <CheckBox fx:id="mintCheckBox" text="Mint" style="-fx-text-fill: #1F2933;"/>
                                    <CheckBox fx:id="nearMintCheckBox" text="Near Mint" style="-fx-text-fill: #1F2933;"/>
                                    <CheckBox fx:id="excellentCheckBox" text="Excellent" style="-fx-text-fill: #1F2933;"/>
                                    <CheckBox fx:id="goodCheckBox" text="Good" style="-fx-text-fill: #1F2933;"/>
                                    <CheckBox fx:id="playedCheckBox" text="Played" style="-fx-text-fill: #1F2933;"/>
                                </VBox>

                                <!-- Language Filter -->
                                <VBox spacing="5">
                                    <Label text="Language" style="-fx-text-fill: #1F2933; -fx-font-size: 14px; -fx-font-weight: bold;"/>
                                    <ComboBox fx:id="languageComboBox" prefWidth="200" promptText="Select Language"
                                              style="-fx-background-color: white;"/>
                                </VBox>

                                <!-- Price Filter -->
                                <VBox spacing="5">
                                    <Label text="Price Range" style="-fx-text-fill: #1F2933; -fx-font-size: 14px; -fx-font-weight: bold;"/>
                                    <Slider fx:id="priceSlider" min="0" max="1000" value="500" showTickLabels="true" showTickMarks="true" prefWidth="200"/>
                                </VBox>

                                <!-- Apply Button -->
                                <Button fx:id="applyFiltersButton" text="Apply Filters" prefWidth="200"
                                        onAction="#onApplyFiltersClicked"
                                        style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-size: 14px; -fx-background-radius: 5; -fx-cursor: hand;"/>
                            </VBox>
                        </content>
                    </CustomMenuItem>
                </items>
            </MenuButton>

            <!-- Spacer -->
            <Region HBox.hgrow="ALWAYS"/>

            <!-- Welcome Label -->
            <Label fx:id="welcomeLabel" text="Benvenuto!"
                   style="-fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 0 10 0 0;"/>
        </HBox>
    </top>

    <!-- Main Content Area -->
    <center>
        <VBox spacing="20" style="-fx-background-color: #252F3D; -fx-padding: 20;">

            <!-- Header -->
            <HBox alignment="CENTER">
                <Label text="POPULAR CARDS"
                       style="-fx-font-size: 36px; -fx-font-family: 'Playfair Display', 'Georgia', serif; -fx-text-fill: #FFFFFF; -fx-font-weight: bold; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.5), 10, 0, 0, 2);"/>
            </HBox>

            <!-- Cards Grid in ScrollPane -->
            <ScrollPane fitToWidth="true" fitToHeight="true"
                        style="-fx-background: transparent; -fx-background-color: transparent; -fx-border-color: transparent;"
                        VBox.vgrow="ALWAYS">
                <content>
                    <FlowPane fx:id="cardsFlowPane" hgap="20" vgap="20"
                              style="-fx-background-color: transparent; -fx-padding: 10;">

                        <!-- Cards will be populated dynamically -->

                    </FlowPane>
                </content>
            </ScrollPane>

        </VBox>
    </center>

</BorderPane>
